params:
  name: opentelemetry
  service_id: true
  route_id: true
  consumer_id: true
  konnect_examples: false
  protocols:
    - name: http
    - name: https
    - name: grpc
    - name: grpcs
  dbless_compatible: 'yes'
  config:
    - name: endpoint
      required: true
      value_in_examples: 'http://opentelemetry.collector:4318/v1/traces'
      datatype: string
      description: |
        The full HTTP(S) endpoint that Kong Gateway should send OpenTelemetry spans to.
        The endpoint must be a [OTLP/HTTP](https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/protocol/otlp.md#otlphttp) endpoint.

    - name: headers # old version of headers parameter without 'referenceable' attribute
      maximum_version: "3.0.x"
      required: false
      datatype: map
      value_in_examples:
        - X-Auth-Token:secret-token
      description: |
        The custom headers to be added in the HTTP request sent to the OTLP server.
        This setting is useful for adding the authentication headers (token)
        for the APM backend.

    - name: headers  # current version of headers parameter
      minimum_version: "3.1.x"
      referenceable: true
      required: false
      datatype: map
      value_in_examples:
        - X-Auth-Token:secret-token
      description: |
        The custom headers to be added in the HTTP request sent to the OTLP server.
        This setting is useful for adding the authentication headers (token)
        for the APM backend.

    - name: resource_attributes
      required: false
      datatype: map
      description: |
        The attributes specified on this property are added to the OpenTelemetry resource object.
        Kong follows the OpenTelemetry specification for [Semantic Attributes](https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/resource/semantic_conventions/README.md#service).

        The following attributes are automatically added to the resource object:
        - `service.name`: The name of the service. This is `kong` by default.
        - `service.version`: The version of Kong Gateway.
        - `service.instance.id`: The node id of Kong Gateway.

        The default values for the above attributes can be overridden by specifying them in this property. For example,
        to override the default value of `service.name` to `my-service`, you can specify `{ "service.name": "my-service" }`.
    - name: batch_span_count
      required: true
      default: 200
      datatype: number
      description: |
        The number of spans to be sent in a single batch.
    - name: batch_flush_delay
      required: true
      default: 3
      datatype: number
      description: |
        The delay, in seconds, between two consecutive batches.
    - name: connect_timeout
      default: 1000
      datatype: number
      description: |
        The timeout, in milliseconds, for the OTLP server connection.
    - name: send_timeout
      default: 5000
      datatype: number
      description: |
        The timeout, in milliseconds, for sending spans to the OTLP server.
    - name: read_timeout
      default: 5000
      datatype: number
      description: |
        The timeout, in milliseconds, for reading the response from the OTLP server.
