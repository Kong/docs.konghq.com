<table>
  <thead>
    <tr>
      <th style="width: 25%;">Form Parameter</th>
      <th style="width: 75%;">Description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>name</code>
        <p><i>required</i></p>
        <p><strong>Type: </strong>string</p>
      </td>
      <td>The name of the plugin, in this case <code>{{ page.configuration.name }}</code>.</td>
    </tr>

    {% if_plugin_version gte:3.2.x %}
      <tr>
        <td><code>instance_name</code>
          <p><i>optional</i></p>
          <p><strong>Type: </strong>string</p>
        </td>
        <td>
          <p>An optional custom name to identify an instance of the plugin, for example <code>{{ page.configuration.name }}_my-service</code>.</p>
          <p>Useful when running the same plugin in multiple contexts, for example, on multiple services.</p>
        </td>
      </tr>
    {% endif_plugin_version %}

    {% if page.configuration.service_id %}
      <tr>
        <td><code>service.name</code> or <code>service.id</code>
          {% if page.configuration.global == false %}
            <p><i>required</i></p>
          {% else %}
            <p><i>optional</i></p>
          {% endif %}
          <p><br><strong>Type: </strong>string</p>
        </td>
        <td>
          <p>The name or ID of the service the plugin targets.</p>
          <p>Set one of these parameters if adding the plugin to a service through the top-level <a href="/gateway/latest/admin-api/#add-plugin"><code>/plugins</code> endpoint.</a></p>
          <p> Not required if using <code>/services/SERVICE_NAME|SERVICE_ID/plugins</code>.</p></td>
      </tr>
    {% endif %}
    {% if page.configuration.route_id %}
      <tr>
        <td><code>route.name</code> or <code>route.id</code>
          <p><i>optional</i></p>
          <p><strong>Type: </strong>string</p>
        </td>
        <td>
          <p>The name or ID of the route the plugin targets.</p>
          <p>Set one of these parameters if adding the plugin to a route through the top-level <a href="/gateway/latest/admin-api/#add-plugin"><code>/plugins</code> endpoint.</a></p>
          <p>Not required if using <code>/routes/ROUTE_NAME|ROUTE_ID/plugins</code>.</p></td>
      </tr>
    {% endif %}
    {% if page.configuration.consumer_id %}
      <tr>
        <td><code>consumer.name</code> or <code>consumer.id</code>
          <p><i>optional</i></p>
          <p><br><strong>Type: </strong>string</p>
        </td>
        <td>
          <p>The name or ID of the consumer the plugin targets.</p>
          <p>Set one of these parameters if adding the plugin to a consumer through the top-level <a href="/gateway/latest/admin-api/#add-plugin"><code>/plugins</code> endpoint.</a></p>
          <p>Not required if using <code>/consumers/CONSUMER_NAME|CONSUMER_ID/plugins</code>.</p></td>
      </tr>
    {% endif %}
      <tr>
        <td><code>enabled</code>
          <p><i>optional</i></p>
          <p><strong>Type: </strong>boolean</p>
          <p><strong>Default value: </strong><code>true</code></p>
        </td>
        <td>Whether this plugin will be applied.</td>
      </tr>
    {% if page.configuration.api_id %}
      <tr>
        <td><code>api_id</code>
          <br><br><strong>Type: </strong>string</td>
        <td>The ID of the API the plugin targets.
          <br><br><strong>Note:</strong> The <a href="/0.13.x/admin-api/#api-object">API Entity</a> is deprecated in favor of Services since <a href="https://github.com/Kong/kong/blob/master/CHANGELOG.md#0130---20180322">CE 0.13.0</a> and <a href="https://docs.konghq.com/gateway/changelog/#0-32">EE 0.32</a>.</td>
        </tr>
    {% endif %}
    {% for field in page.configuration.config %}
      {% if_plugin_version gte:field.minimum_version lte:field.maximum_version %}
        {% if field.group %}
          <tr>
            <td colspan="2">
              <strong>
                <br><br>{{ field.group | markdownify | strip_html }}
                {% if field.description %}
                  <br><small>{{ field.description | markdownify | strip_html }}</small>
                {% endif %}
              </strong>
            </td>
          </tr>
          <tr><th>Form Parameter</th><th>Description</th></tr>
        {% else %}
          <tr>
            <td><code>config.{{ field.name }}</code>
              {% if field.required == true %}<p><em>required</em></p>{% endif %}
              {% if field.required == false %}<p><em>optional</em></p>{% endif %}
              {% if field.required == "semi" %}<br><em>semi-optional</em>{% endif %}
              {% if field.datatype != nil %}<p><strong>Type: </strong>{{ field.datatype | markdownify | strip_html }}</p>{% endif %}
              {% if field.default != nil %}<p><strong>Default value: </strong><code>{{ field.default | markdownify | strip_html }}</code></p>{% endif %}
            </td>
            <td>
              <br>{{ field.description | markdownify }}
              {% if field.encrypted == true %}
                <p>If <a href="/gateway/latest/plan-and-deploy/security/db-encryption">keyring database encryption</a> is enabled, this value will be encrypted.</p>
              {% endif %}
              {% if_plugin_version gte:2.7.x %}
                {% if field.referenceable == true %}
                  <p>
                    This field is <em>referenceable</em>, which means it can be securely stored as a
                    <a href="/gateway/latest/kong-enterprise/secrets-management/">secret</a>
                    in a vault. References must follow a <a href="/gateway/latest/kong-enterprise/secrets-management/reference-format/">specific format</a>.
                  </p>
                {% endif %}
              {% endif_plugin_version %}
            </td>
          </tr>
        {% endif %}
      {% endif_plugin_version %}
    {% endfor %}
  </tbody>
</table>
