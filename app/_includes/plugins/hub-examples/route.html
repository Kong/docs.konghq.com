{%- assign hub_example = include.hub_example -%}
{%- assign kong_manager_fields = hub_example.kong_manager.fields -%}

The following examples provide some typical configurations for enabling
the <code>{{ hub_example.plugin_name }}</code> plugin on a
[route](/gateway/latest/admin-api/#route-object).

{% navtabs %}
  {% navtab Admin API %}

Make the following request:

{% include_cached plugins/hub-examples/curl.html example=hub_example.curl %}

Replace `ROUTE_NAME|ROUTE_ID` with the `id` or `name` of the route that this plugin configuration will target.

  {% endnavtab %}

  {% unless page.metadata.k8s_examples == false %}
    {% navtab Kubernetes %}

First, create a [KongPlugin](/kubernetes-ingress-controller/latest/references/custom-resources/#kongplugin)
resource:

{% include_cached plugins/hub-examples/kubernetes.html example=hub_example.kubernetes %}

Then, apply it to an ingress ([route or routes](/gateway/latest/admin-api/#route-object))
by annotating the ingress as follows:

``` yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: ROUTE_NAME|ROUTE_ID
  annotations:
    kubernetes.io/ingress.class: kong
    konghq.com/plugins: {{ hub_example.plugin_name }}-example
spec:
  rules:
  - host: examplehostname.com
    http:
      paths:
      - path: /bar
        backend:
          service:
            name: echo
            port:
              number: 80
  ```

Replace `ROUTE_NAME|ROUTE_ID` with the `id` or `name` of the route that this plugin configuration will target.

<blockquote class="note">
  <strong>Note:</strong> The KongPlugin resource only needs to be defined once
  and can be applied to any service, consumer, or route in the namespace. If you
  want the plugin to be available cluster-wide, create the resource as a
  <code>KongClusterPlugin</code> instead of <code>KongPlugin</code>.
</blockquote>

    {% endnavtab %}
  {% endunless %}

  {% unless page.metadata.yaml_examples == false %}
    {% navtab Declarative (YAML) %}

Add this section to your declarative configuration file:

{% include_cached plugins/hub-examples/yaml.html example=hub_example.yaml %}

Replace `ROUTE_NAME|ROUTE_ID` with the `id` or `name` of the route that this plugin configuration
  will target.
{% endnavtab %}
{% endunless %}
{% unless page.metadata.konnect_examples == false or page.extn_publisher != "kong-inc" %}
{% navtab Konnect Cloud %}

You can configure this plugin through the [{{site.konnect_short_name}}](https://cloud.konghq.com) UI.

From the {% konnect_icon servicehub %} [**Service Hub**](https://cloud.konghq.com/servicehub), select a service version, then set up the plugin:

1. Select a route.
2. In the **Plugins** section, click **Add Plugin**.
3. Find and select the **{{ page.name }}** plugin.{% unless
  kong_manager_fields.size  == 0 %}
4. Configure the plugin's [parameters](#parameters).

    You can test out the plugin with the following sample configuration:
    {% for field in kong_manager_fields %}
    * {{ field }}
    {% endfor -%}
{%- endunless %}
5. Click **Create**.

    {% endnavtab %}
  {% endunless %}

  {% unless page.metadata.manager_examples == false or page.extn_publisher != "kong-inc" %}
    {% navtab Kong Manager %}

You can configure this plugin through the Kong Manager UI.

1. In Kong Manager, select the workspace.
2. Open **Routes** from the menu, then click **View** for the route row.
3. From the plugin section, click **Add Plugin**.
4. Find and select the **{{ page.name }}** plugin.
  {% if page.enterprise == true or page.plus == true %}
    <blockquote class="note">
    <strong>Note:</strong> If the plugin is greyed out, then it is not available
    for your product tier. See <a href="/gateway/latest/licenses/">{{site.base_gateway}} tiers</a>.
    </blockquote>
  {%- endif %}
5. If the option is available, select **Scoped**.
6. Add the route ID if it is not already prefilled.
{% unless kong_manager_fields.size == 0 -%}
7. Configure the plugin's [parameters](#parameters).

    You can test out the plugin with the following sample configuration:
    {% for field in kong_manager_fields %}
    * {{ field }}
    {% endfor -%}
{%- endunless %}
8. Click **Create**.

    {% endnavtab %}
  {% endunless %}
{% endnavtabs %}
