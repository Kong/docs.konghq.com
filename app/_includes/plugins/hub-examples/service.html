

The following examples provide some typical configurations for enabling
the <code>{{page.configuration.name}}</code> plugin on a
[service](/gateway/latest/admin-api/#service-object).

{% navtabs %}
  {% navtab Admin API %}

Make the following request:

```bash
curl -X POST http://localhost:8001/services/SERVICE_NAME|SERVICE_ID/plugins \
    --data "name={{page.configuration.name}}" {{ include.config_required_fields }}
```

Replace `SERVICE_NAME|SERVICE_ID` with the `id` or `name` of the service that this plugin configuration will target.

  {% endnavtab %}

  {% unless page.configuration.k8s_examples == false %}
    {% navtab Kubernetes %}

First, create a [KongPlugin](/kubernetes-ingress-controller/latest/references/custom-resources/#kongplugin)
resource:

```yaml
apiVersion: configuration.konghq.com/v1
kind: KongPlugin
metadata:
  name: {{page.configuration.name}}-example
{% if include.config_required_fields_k8s == 'config: ' %}config:
  EXAMPLE_PARAMETER: EXAMPLE_VALUE{% else %}{{ include.config_required_fields_k8s }}{% endif %}
plugin: {{page.configuration.name}}
```

Next, apply the KongPlugin resource to a
[service](/gateway/latest/admin-api/#service-object) by annotating the
service as follows:

```yaml
apiVersion: v1
kind: Service
metadata:
  name: SERVICE_NAME|SERVICE_ID
  labels:
    app: SERVICE_NAME|SERVICE_ID
  annotations:
    konghq.com/plugins: {{page.configuration.name}}-example
spec:
  ports:
  - port: 80
    targetPort: 80
    protocol: TCP
    name: SERVICE_NAME|SERVICE_ID
  selector:
    app: SERVICE_NAME|SERVICE_ID
  ```

Replace `SERVICE_NAME|SERVICE_ID` with the `id` or `name` of the service that this plugin configuration will target.

<blockquote class="note">
  <strong>Note:</strong> The KongPlugin resource only needs to be defined once
  and can be applied to any service, consumer, or route in the namespace. If you
  want the plugin to be available cluster-wide, create the resource as a
  <code>KongClusterPlugin</code> instead of <code>KongPlugin</code>.
</blockquote>

    {% endnavtab %}
  {% endunless %}

  {% unless page.configuration.yaml_examples == false %}
    {% navtab Declarative (YAML) %}

Add this section to your declarative configuration file:

``` yaml
plugins:
- name: {{page.configuration.name}}
  service: SERVICE_NAME|SERVICE_ID
  {% if include.config_required_fields_yaml == 'config: ' %}config:
    EXAMPLE_PARAMETER: EXAMPLE_VALUE{% else %}{{ include.config_required_fields_yaml }}{% endif %}
```

Replace `SERVICE_NAME|SERVICE_ID` with the `id` or `name` of the service that this plugin configuration will target.

    {% endnavtab %}
  {% endunless %}

  {% unless page.configuration.konnect_examples == false or include.publisher != "Kong Inc." %}
    {% navtab Konnect Cloud %}

You can configure this plugin through the [{{site.konnect_short_name}}](https://cloud.konghq.com) UI.

From the {% konnect_icon servicehub %} [**Service Hub**](https://cloud.konghq.com/servicehub), select a service version, then set up the plugin:

1. In the **Plugins** section, click **Add Plugin**.
2. Find and select the **{{ include.name }}** plugin.{% unless
  include.config_required_fields_gui == empty %}
3. Configure the plugin's [parameters](#parameters).

    You can test out the plugin with the following sample configuration:
    {{ include.config_required_fields_gui }}{% endunless %}
4. Click **Create**.

    {% endnavtab %}
  {% endunless %}

  {% unless page.configuration.manager_examples == false or include.publisher != "Kong Inc." %}
    {% navtab Kong Manager %}

You can configure this plugin through the Kong Manager UI.

1. In Kong Manager, select the workspace.
2. From the **Services** section, click **View** for the
service row.
3. From the plugin section, click **Add Plugin**.
4. Find and select the **{{ include.name }}** plugin.{%
    if page.enterprise == true or page.plus == true %}
    <blockquote class="note">
    <strong>Note:</strong> If the plugin is greyed out, then it is not available
    for your product tier. See <a href="/gateway/latest/licenses/">{{site.base_gateway}} tiers</a>.
    </blockquote>{% endif %}
5. If the option is available, select **Scoped**.
6. Add the service name and ID to the **Service** field if it
is not already pre-filled.{% unless
    include.config_required_fields_gui == empty %}
8. Configure the plugin's [parameters](#parameters).

    You can test out the plugin with the following sample configuration:
    {{ include.config_required_fields_gui }}{% endunless %}
9. Click **Create**.

    {% endnavtab %}
  {% endunless %}
{% endnavtabs %}
