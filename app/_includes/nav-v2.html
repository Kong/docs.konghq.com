<header class="navbar-v2">
  <div class="navbar-content">
    <a href="https://konghq.com/" class="navbar-brand col col-xl-auto">
      <img
        src="https://2tjosk2rxzc21medji3nfn1g-wpengine.netdna-ssl.com/wp-content/themes/konghq/assets/img/gradient-logo.svg"
        alt="Kong Logo"
      />
    </a>
    {% if page.layout != "landing-page" %}
    <div class="separator mobile"></div>
    <div class="search-input-wrapper">
      <img src="/assets/images/landing-page/search.svg" alt="search" onclick="handleSearchClicked()">
      <input id="getkong-algolia-search-input" type="text" placeholder="Search the docs...">
    </div>

    <script type="text/javascript">
      function getSearchPlaceholder () {
        var w = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
        if (w <= 800) {
          document.getElementById('getkong-algolia-search-input').placeholder = 'Search...';
        } else {
          document.getElementById('getkong-algolia-search-input').placeholder = 'Search the docs...';
        }
      }

      getSearchPlaceholder();
      window.addEventListener('resize', getSearchPlaceholder);
    </script>
    <div class="search-results-wrapper"></div>
    {% endif %}
    <div class="separator"></div>
    <div class="navbar-items">
      <div class="navbar-items">
        <div class="navbar-item with-submenu{% if page.layout != 'landing-page' %} active{% endif %}" onclick="toggleSubmenuVisible(this)">
          <a href="https://docs.konghq.com/">Docs</a>
          <span class="caret"></span>
          <div class="navbar-item-submenu">
            <div class="submenu-section">
              <span class="navbar-item submenu-section-title">Kong Konnect</span>
              <a href="/konnect/" class="navbar-item">Konnect SaaS</a>
              <a href="/enterprise/" class="navbar-item">Kong Gateway (Enterprise)</a>
              <a href="/mesh/" class="navbar-item">Kong Mesh</a>
              <a href="/hub/" class="navbar-item">Plugin Hub</a>
            </div>
            <div class="submenu-section">
              <span class="navbar-item submenu-section-title">Open Source</span>
              <a href="/gateway-oss/" class="navbar-item">Kong Gateway (OSS)</a>
              <a href="/deck/" class="navbar-item">decK</a>
              <a href="/kubernetes-ingress-controller/latest/introduction/" class="navbar-item">Kubernetes Ingress Controller</a>
              <a href="https://support.insomnia.rest/" target="_blank" class="navbar-item">Insomnia</a>
              <a href="https://kuma.io/docs/" target="_blank" class="navbar-item">Kuma</a>
            </div>
          </div>
        </div>
        <a href="https://support.konghq.com/" class="navbar-item">Support</a>
        <a href="https://konghq.com/community/" class="navbar-item">Community</a>
        <a href="https://learn.konghq.com/account/login/" class="navbar-item">Kong U</a>
        <a href="https://portal.konglabs.io/workshops" class="navbar-item">Demos & Labs</a>
      </div>
      <a
        href="https://konghq.com/get-started/?itm_source=website&amp;itm_medium=nav"
        class="navbar-button"
      >
        Get Started
      </a>
    </div>
    <div
      id="navbar-menu-toggle-button"
      class="small-screen-button"
      aria-label="Toggle navigation"
      onclick="toggleButtonClicked()"
    >
      <div></div>
      <div></div>
      <div></div>
    </div>
  </div>
</header>

<script>
  function handleSearchClicked () {
    $('.navbar-v2').toggleClass('search-opened')
    $('.navbar-v2').toggleClass('menu-opened', false)
    $('#getkong-algolia-search-input').focus()
  }

  function toggleButtonClicked () {
    if (!$('.navbar-v2').hasClass('search-opened')) {
      $('.navbar-v2').toggleClass('menu-opened')
    } else {
      $('.navbar-v2').toggleClass('search-opened', false)
    }
  }

  function toggleSubmenuVisible (element) {
    $(element).toggleClass('submenu-title')
    $(element.parentElement).toggleClass('submenu-opened')
  }
</script>

{% if page.layout != "landing-page" %}
<style>
  @media (max-width: 768px) {
    .algolia-docsearch-suggestion--subcategory-column {
      display: none !important;
    }

    .algolia-autocomplete .ds-dropdown-menu {
      max-width: calc(100% + 40px);
      min-width: 300px;
    }

    .algolia-autocomplete.algolia-autocomplete-left .ds-dropdown-menu {
      left: -40px !important;
    }

    .algolia-autocomplete.algolia-autocomplete-left .ds-dropdown-menu:before {
      left: 88px;
    }
  }
</style>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>

<script type="text/javascript">
  docsearch({
    appId: 'T5JKD83LWT',
    apiKey: '1390283021f26e36117242934deb8d9d',
    indexName: 'prod_Full_Docs',
    inputSelector: '#getkong-algolia-search-input',
    algoliaOptions: {
      hitsPerPage: 8
    },
    // Override selected event to allow for local environment navigation
    handleSelected: function (input, event, suggestion) {
      input.setVal('')
      window.location.href = window.location.protocol + '//' + window.location.host + suggestion.url.split('docs.konghq.com')[1]
    }
    // ,debug: true // Set debug to true if you want to inspect the dropdown
  })
</script>
{% endif %}
