<aside class="docs-sidebar">
  <i class="fa fa-times close-sidebar"></i>

  <div class="sidebar-title-container">
    <div class="sidebar-title">
      {% if page.edition == 'enterprise' %}{{site.ee_product_name}}
      {% elsif page.edition == 'konnect' %}{{site.konnect_saas}}
      {% elsif page.edition == 'mesh' %}{{site.mesh_product_name}}
      {% elsif page.edition == 'deck' %}decK
      {% elsif page.edition == 'kubernetes-ingress-controller' %}{{site.kic_product_name}}
      {% elsif page.edition == 'gateway-oss' %}{{site.ce_product_name}}
      {% elsif page.edition == 'getting-started-guide' %}Getting Started with Kong Gateway
      {% endif %}
    </div>
    {% unless page.no_version == true %}
    <div class="versions-dropdown dropdown">
      <button class="dropdown-button" id="version-dropdown" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        <span>
          Version {{page.kong_version}}
          {% if page.kong_version == page.kong_latest.release %}
            <em>(latest)</em>
          {% endif %}
        </span>
        <span class="caret"></span>
      </button>
      <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="version-dropdown">
          {% for ver in page.kong_versions reversed %}
          {% assign version_page_url = page.url | replace: page.kong_version, ver.release %}
          {% capture version_page_exists %}{% page_exists {{version_page_url}} %}{% endcapture %}
        <li {% if page.kong_version==ver.release %} class="active" {% endif %}>
          <a href="{% if version_page_exists == 'true' %}{{version_page_url}}{% else %}/{% if page.edition == 'gateway-oss' %}gateway-oss/{% endif %}{% if page.edition == 'enterprise' %}enterprise/{% endif %}{% if page.edition == 'mesh' %}mesh/{% endif %}{{ver.release}}{% endif %}"
            {% if ver.release==page.kong_version %} class="active" {% endif %}
            data-version-id="{{ver.release}}"
          >
            {{ver.release}}
            {% if ver.release == page.kong_latest.release %} <em>(latest)</em>{% endif %}
          </a>
        </li>
        {% endfor %}
      </ul>
    </div>
    {% endunless %}
  </div>

  {% if page.edition == 'enterprise' %}
  {% assign docs_url = '/enterprise/' | append: page.kong_version %}
  {% elsif page.edition == 'studio' %}
  {% assign docs_url = '/studio/' | append: page.kong_version %}
  {% elsif page.edition == 'getting-started-guide' %}
  {% assign docs_url = '/getting-started-guide/' | append: page.kong_version %}
  {% elsif page.edition == 'mesh' %}
  {% assign docs_url = '/mesh/' | append: page.kong_version %}
  {% elsif page.edition == 'konnect' %}
  {% assign docs_url = '/konnect' %}
  {% elsif page.edition == 'kubernetes-ingress-controller' %}
  {% assign docs_url = '/kubernetes-ingress-controller/' | append: page.kong_version %}
  {% elsif page.edition == 'deck' %}
  {% assign docs_url = '/deck' %}
  {% elsif page.edition == 'gateway-oss' %}
  {% assign docs_url = '/gateway-oss/' | append: page.kong_version %}
  {% endif %}

  <ul class="accordion-container">
    <input id="accordion-opened" type="text" />
    {% for nav in page.nav_items %}
    {% include docs-sidebar-item.html id=forloop.index docs_url=docs_url items=nav.items url=nav.url absolute_url=nav.absolute_url icon=nav.icon title=nav.title %}
    {% endfor %}
  </ul>
</aside>
